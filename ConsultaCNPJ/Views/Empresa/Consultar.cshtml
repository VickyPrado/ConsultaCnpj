@model List<ConsultaCNPJ.Models.Empresa>

@{
    Layout = "~/Views/Shared/Layout.cshtml";
}

<div class="consulta">
    <h1>Consultar CNPJ</h1>
    <form method="post" asp-action="Consultar">
        <label for="cnpjs">CNPJs (separados por vírgula):</label>
        <input type="text" name="cnpjs" maxlength="500" placeholder="Ex.: 14.380.200/0001-21" />
        <button type="submit">Consultar</button>
    </form>
    @if (TempData["Mensagem"] != null)
    {
        <p id="mensagem-sucesso">@TempData["Mensagem"]</p>
    }
    @if (ViewBag.Erro != null)
    {
        <p class="erro">@ViewBag.Erro</p>
    }
</div>
<div class="empresas-cadastradas">
    @if (Model != null && Model.Any())
    {
        <h1>Empresas Cadastradas</h1>
        <ul>
            @foreach (var empresa in Model)
            {
                <li>@empresa.Cnpj - @empresa.Nome</li>
            }
        </ul>
    }
    else if (ViewBag.Erro != null || TempData["Mensagem"] != null)
    {
        <p>Nenhuma empresa cadastrada.</p>
    }
</div>

<script>
    setTimeout(function() {
        var mensagem = document.getElementById("mensagem-sucesso");
        if (mensagem) {
            mensagem.style.display = "none";
        }
    }, 4000);
</script>